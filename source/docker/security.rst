セキュリティ チェックリスト
===========================================================

- [ ] すべてのコンテナを非rootユーザで実行しているか
- [ ] コンテナに **--privileged** オプションを付けて動かしていませんか？
- [ ] コンテナを可能な限り読み取り専用で実行していますか？
- [ ] ホストからマウントされた機密性の高いディレクトリはないですか？
- [ ] Dockerソケットはマウントしていませんか？
- [ ] CI/CD パイプラインは、本番クラスタで動かしていますか？
- [ ] CI/CD パイプラインは、特権的な権限を持っていますか？
- [ ] CI/CD パイプラインは、Dockerソケットを使用していますか？
- [ ] コンテナイメージに脆弱性がないかスキャンしていますか？
- [ ] コンテナイメージに脆弱性が含まれていた場合、再ビルドして再デプロイするプロセス/ツールはありますか？
- [ ] seccomp または AppArmor プロファイルを使用していますか？

    - 手始め : Dockerのデフォルトプロファイルを使用する
    - アプリケーションに合わせてプロファイルをカスタマイズする

- [ ] ホストOSがSELinuxをサポートしている場合、SELinuxを有効にしていますか？
- [ ] 信用あるベースイメージを使用していますか？

    - Docker Hubの公式イメージを使用する
    - 自分たちで管理しているレジストリを使用する

- [ ] イミュータブルコンテナの使用を強制していますか？

    - すべての実行可能なコードが、ビルド時にイメージに含まれていることを確認していますか？
    - コンテナ実行時に、イメージを変更していませんか？

- [ ] コンテナにリソースの制限を設定していますか？

    - ECSタスク定義 : CPU、メモリ、I/O、ネットワーク帯域幅などのリソース制限を設定していますか？
    - 裏で、cgroupを使用して、リソース制限を設定している

- [ ] 許可されたイメージのみを本番環境で実行できるようにするためのアドミッションコントロールがありますか？
- [ ] コンポーネント間の接続に mTLS を使用していますか？
- [ ] コンポーネント間の通信を制限するネットワークポリシーはありますか？
- [ ] 一時ファイルシステムを使ってコンテナにシークレットを渡していませんか？
- [ ] 保存時 / 転送時にシークレットが暗号化されていますか？
- [ ] シークレット管理システムを使用して保管やローテーションを行っていますか？
- [ ] コンテナ内で想定される実行ファイルのみ起動できるようにランタイムのセキュリティツールを利用していますか？
- [ ] Drift Prevention のためのランタイムセキュリティソリューションはありますか？
- [ ] 他のアプリケーションとは切り離して、コンテナの実行環境としてホストを使用していますか？
- [ ] ホストシステムは常にセキュリティリリースに更新していますか？
- [ ] コンテナ専用のOSを利用することを検討していますか？
- [ ] CSPM（Clud Security Posture Management）ツールを利用して基盤となるクラウドインフラのセキュリティ設定を定期的にチェックしていますか？
- [ ] CIS Benchmarks for Linux、Docker、Kubernetes などのセキュリティベストプラクティスに従ってホストやコンテナが設定されていますか？